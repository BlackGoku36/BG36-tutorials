<!doctype html>
<html lang="en">

<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145916081-1"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
	
		gtag('config', 'UA-145916081-1');
		</script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="../../doc.css">
	<link rel="stylesheet" href="../../atom-one-dark.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<title>Basics | Canvas</title>
</head>

<body class="purple-grey">

	<div id="sidebar" class="sidebar">
		<script src="sidebar.js"></script>
	</div>

	<div id="main">
		<script src="../../main1.js"></script>
		<script>main("Canvas");</script>

		<div class="alert alert-warning" role="alert">
			THIS IS DATED! ARMORY2D HAS EVOLVED A LOT SINCE WRITING THIS!
		</div>
		<p>In this tutorial, we will create canvas using Armory2D, learn about it and then add and control canvas's
			element using <code>haxe</code>.</p>
		<p>Our Goal:</p>
		<iframe width="640" height="480" src="https://blackgoku36.github.io/armory-tutorials/docassets/finalcanvas.mp4"
			frameborder="0" allowfullscreen></iframe>
		<hr />
		<p>Fire up Armory3D project, once you have it up, go to <code>Scene - Armory Scene Trait</code>, create new
			<code>Canvas Trait</code>, name it <code>UI</code> and hit <code>Edit Canvas</code>. A window named Armory2D
			should pop-up:</p>
		<p><img src="../../docassets/armory2D.png" alt="Armory2d Image" width="70%" height="70%" /></p>
		<hr />
		<p>Let study its user interface:</p>
		<p><img src="../../docassets/CanvasLayout.png" alt="Canvas's Layout Image" width="70%" height="70%" /></p>
		<ol>
			<li>
				<p>This is where you can add elements from.</p>
			</li>
			<li>
				<p>This is <code>Canvas</code>'s area, where you arrange for you window.</p>
			</li>
			<li>
				<p>This is <code>Project</code> tab, where you configure you elements.</p>
			</li>
			<li>
				<p><code>Save</code>: Saves the canvas.</p>
			</li>
			<li>
				<p><code>Canvas</code>: Create new canvas with given name, width and height.</p>
			</li>
			<li>
				<p><code>Outliner</code>: This is layer. You can press <code>Up</code>/<code>Down</code> to move it
					up/down the layer, <code>Remove</code> to remove the element, <code>Duplicate</code>, to duplicate.
					(Pretty obvious)</p>
			</li>
			<li>
				<p><code>Properties</code>: Adjust visibility, name, text, transform, color of an selected element.</p>
			</li>
			<li>
				<p><code>Align</code>: <em>(WIP)</em>.</p>
			</li>
			<li>
				<p><code>Anchor</code>: Anchor element to selected side.</p>
			</li>
			<li>
				<p><code>Script</code>: This is used to handle event.</p>
			</li>
			<li>
				<p><code>Timeline</code>: <em>(WIP)</em>.</p>
			</li>
			<li>
				<p>This is <code>Assets</code> tab, where you import assets in:</p>
			</li>
			<li>
				<p><code>Import Assets</code>: Import assets using zui's file dialogue.</p>
			</li>
			<li>
				<p><code>X</code>: Remove assets.</p>
			</li>
			<li>
				<p>This is <code>Preferences</code> tab, where you configure Armory2D:</p>
			</li>
			<li>
				<p><code>UI Scale</code>: Scales the UI.</p>
			</li>
			<li>
				<p><code>Grid Size</code>: Scale the grid.</p>
			</li>
			<li>
				<p><code>Grid Snap Position:</code> Snap element to grid position.</p>
			</li>
			<li>
				<p><code>Grid Snap Bounds:</code> Snap element to grid bounds.</p>
			</li>
			<li>
				<p><code>VSync</code>: Enable/disable <a href="https://en.wikipedia.org/wiki/Screen_tearing">VSync</a>.
				</p>
			</li>
			<li>
				<p><code>Console</code>: <em>(WIP)</em>.</p>
			</li>
			<li>
				<p>This is Timeline, used to animate elements, but currently it is WIP, so we will ignore it for now.
				</p>
			</li>
		</ol>
		<p>Let add elements:</p>
		<p><img src="../../docassets/canvas_2.png" alt="" width="70%" height="70%" /></p>
		<ol>
			<li><code>Text</code>: Add Text <code>txt</code>, We will control this by using below UI (sliders, input,
				etc).</li>
			<li><code>Sliders</code>: Add 3 sliders <code>slider_r</code>, <code>slider_g</code>, <code>slider_b</code>
				to control rgb value of the <code>txt</code>.</li>
			<li><code>Input</code>: Add input <code>input_txt</code>, we will use this to controll the text of
				<code>txt</code>.</li>
			<li><code>Combo</code>: Add combo(aka dropdown), set text as
				<code>Default Case;Upper Case;Lower Case</code>,we will use it make our <code>txt</code> case-sensitive
				or not.</li>
			<li><code>Radio</code>: Add radio, <code>rotate</code>, set text as
				<code>Rotate 90;Rotate 180;Rotate 0</code>,we will use this set rotation of our text.</li>
			<li><code>Check</code>: Add checkbox <code>visibility</code>, we will use this to make <code>txt</code>
				visible/invisible.</li>
			<li><code>Button</code>: Add button <code>apply_btn</code>, and set <code>apply_btn</code> in
				<code>Script - Event</code>,we will use this to apply the change made using UI.</li>
			<li><code>Image</code>: Add <code>logo</code>, we use this to for image assets.</li>
			<li><code>Shape</code>: Add <code>h_1</code>, we use this add shape.</li>
		</ol>
		<div class="alert alert-warning" role="alert">
			We set text of our combo and radio as <code>option1;option2;option3</code> because it seperate options
			by <code>;</code>.
		</div>
		<p>When you run the game, you should see something like this:</p>
		<p><img src="../../docassets/canvas_3.png" alt="" width="70%" height="70%" /></p>
		<hr />
		<p>Now, we will create <code>Haxe Trait</code> to control our UI created in <code>UI</code> Canvas. Head over to
			<code>Scene - Armory Scene Trait</code> in Blender and create new <code>Haxe Trait</code> and name it
			<code>CanvasController</code> and hit <code>Edit Script</code>.</p>
		<pre><code class="haxe language-haxe">// In CanvasController.hx
package arm;

import iron.Scene;
import armory.trait.internal.CanvasScript;
import armory.system.Event;

class CanvasController extends iron.Trait {

	// Initialize canvas as CanvasScript.
	var canvas:CanvasScript;

	public function new() {
		super();

		notifyOnInit(function() {
			// Set canvas as CanvasScript trait from active scene.
			canvas = Scene.active.getTrait(CanvasScript);
			// Add event listener with string 'apply_btn' and call 'applyCanvas' function.
			Event.add("apply_btn", applyCanvas);
		});

	}

	public function applyCanvas() {
		trace("Applied!");
	}
}
          </code></pre>
		<p>If you were to run this and press <code>Apply</code> button, it should print <code>Applied!</code>. If it do,
			then our basics are working and we are ready to do more work.</p>
		<p>Now to change color of text using <code>slider_r</code>/<code>slider_g</code>/<code>slider_b</code> silder
			and enable/disable visibility using <code>visibility</code> checkbox:</p>
		<pre><code class="haxe language-haxe">//In CanvasController.hx
~

import kha.Color;
import zui.Canvas.TElement;
~
class CanvasController extends iron.Trait {

	var canvas:CanvasScript;
	// Initialize text as TElement.
	var text:TElement;

	public function new() {
		super();

		notifyOnInit(function() {
			canvas = Scene.active.getTrait(CanvasScript);
			//get element from canvas with string 'txt'.
			text = canvas.getElement("txt");
			Event.add("apply_btn", applyCanvas);
		});
	}
          
	public function applyCanvas() {
		//Only call set_'s funtions when button is pressed.
		set_rgb();
		set_visibility();
	}

	public function set_rgb() {
		//Get value from UI using getHandle().
		var r = canvas.getHandle("slider_r").value;
		var g = canvas.getHandle("slider_g").value;
		var b = canvas.getHandle("slider_b").value;
		//Set text color from float r,g,b.
		text.color = Color.fromFloats(r, g, b);
	}

	public function set_visibility() {
		//Get checkbox's selected bool value.
		var is_selected = canvas.getHandle("visibility").selected;
		// if isn't selected than keep invisible else visible.
		if (!is_selected){
			text.visible = false;
		}else{
			text.visible = true;
		}
	}
}
          </code></pre>
		<p>Now we will get input from <code>input_txt</code> and case sensitivity from <code>dd_case</code> and set Text
			<code>txt</code> according to it.</p>
		<pre><code class="haxe language-haxe">//In CanvasContoller.hx
~
class CanvasController extends iron.Trait {
	~
	public function new() { ~ }

	public function applyCanvas() {
		set_rgb();
		set_visibility();
		set_input_txt();// 4
	}

	public function set_rgb() { ~ }

	public function set_visibility() { ~ }

	public function set_input_txt() {
		//Get input value.
		var input_txt = canvas.getHandle("input_txt").text;
		//Get selected value from drop down with position.
		var caseSensitivity = canvas.getHandle("dd_case").position;
		// 3
		if (caseSensitivity == 1){
			text.text = input_txt.toUpperCase();
		}else if (caseSensitivity == 2){
			text.text = input_txt.toLowerCase();
		}else{
			text.text = input_txt;
		}
	}
}
          </code></pre>
		<p>And lastly rotation of Text <code>txt</code> using Radio <code>visibility</code>:</p>
		<pre><code class="haxe language-haxe">~
class CanvasController extends iron.Trait {
	~
	public function new() { ~ }

	public function applyCanvas() {
		~
		set_rotation();
	}

	public function set_rgb() { ~ }

	public function set_visibility() { ~ }

	public function set_input_txt() { ~ }

	public function set_rotation(){
		//Just like dropdown's case use position to get selected value.
		var rotate = canvas.getHandle("rotate").position;
		//Set text's rotation according to selected radio's value.
		if (rotate == 0){
			text.rotation = 0;
		}else if (rotate == 1){
			text.rotation = 90 * 3.14 / 180;
		}else if (rotate == 2){
			text.rotation = 180 * 3.14 / 180;
		}
	}
}
          </code></pre>
		<div class="alert alert-tip" role="alert">
			Armory uses radians almost everywhere so be sure to convert it to degrees.
		</div>
		<p>Now on playing it, you should get our goal.</p>
		<p><strong>🎉There we go, our tutorial is finished 🎉</strong></p>
		<hr />
		<p>If anything goes wrong, then you can check the <a
				href="https://github.com/BlackGoku36/armory-tutorial-download/tree/master/Canvas">source code</a></p>

		<nav aria-label="Page navigation example">
			<ul class="pagination justify-content-center">
				<li class="page-item">
					<a class="page-link a" href="trait.html" tabindex="-1" aria-disabled="true">Previous</a>
				</li>
				<li class="page-item"><a class="page-link a " href="trait.html">1</a></li>
				<li class="page-item"><a class="page-link active" href="canvas.html">2</a></li>
				<li class="page-item"><a class="page-link a" href="navmesh.html">3</a></li>
				<li class="page-item"><a class="page-link a" href="tilesheet.html">4</a></li>
				<li class="page-item">
					<a class="page-link a" href="navmesh.html">Next</a>
				</li>
			</ul>
		</nav>

		<script src="../../main2.js"></script>
		<script>create("../../")</script>
</body>

</html>